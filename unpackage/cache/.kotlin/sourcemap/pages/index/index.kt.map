{"version":3,"sources":["pages/index/index.uvue","pages/index/index.uvue?type=page"],"sourcesContent":["<template>\r\n\t<view class=\"uni-flex-item\">\r\n\t\t<web-view id=\"web-view\" class=\"uni-flex-wv\" :src=\"src\" :webview-styles=\"webview_styles\" @message=\"message\"\r\n\t\t\t@error=\"error\" @loading=\"loading\" @loaded=\"loaded\" @download=\"download\">\r\n\t\t</web-view>\r\n\t\t<view class=\"uni-padding-wrap uni-common-mt\">\r\n\t\t\t<view class=\"uni-input-v\">\r\n\t\t\t\t<input class=\"uni-input\" confirmType=\"go\" placeholder=\"输入网址跳转\" @confirm=\"confirm\" />\r\n\t\t\t</view>\r\n\t\t\t<view class=\"uni-row uni-btn-v\">\r\n\t\t\t\t<button class=\"uni-flex-item\" type=\"primary\" @click=\"back\">后退</button>\r\n\t\t\t\t<button class=\"uni-btn-ml uni-flex-item\" type=\"primary\" @click=\"forward\">前进</button>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"uni-row uni-btn-v\">\r\n\t\t\t\t<button class=\"uni-flex-item\" type=\"primary\" @click=\"reload\">重新加载</button>\r\n\t\t\t\t<button class=\"uni-btn-ml uni-flex-item\" type=\"primary\" @click=\"stop\">停止加载</button>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"uni-btn-v\">\r\n\t\t\t\t<button type=\"primary\" @click=\"nativeToWeb\">原生和Web通信</button>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script lang=\"uts\">\n\tinterface Web {\n\t\tconnection: any\n\t}\n\t\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tsrc: '../static/index.html',\r\n\t\t\t\twebview_styles: {\r\n\t\t\t\t\tprogress: {\r\n\t\t\t\t\t\tcolor: '#FF3333'\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\twebviewContext: null as WebviewContext | null,\r\n\t\t\t\tloadError: false,\r\n\t\t\t\tconn: null\r\n\t\t\t}\r\n\t\t},\r\n\t\tonReady() {\r\n\t\t\tthis.webviewContext = uni.createWebviewContext('web-view', this)\r\n\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tback() {\r\n\t\t\t\tthis.webviewContext?.back();\r\n\t\t\t},\r\n\t\t\tforward() {\r\n\t\t\t\tthis.webviewContext?.forward();\r\n\t\t\t},\r\n\t\t\treload() {\r\n\t\t\t\tthis.webviewContext?.reload();\r\n\t\t\t},\r\n\t\t\tstop() {\r\n\t\t\t\tthis.webviewContext?.stop();\r\n\t\t\t},\r\n\t\t\tnativeToWeb() {\r\n\t\t\t\tthis.webviewContext?.evalJS(\"alert('hello uni-app x')\");\r\n\t\t\t},\r\n\t\t\tmessage(event : WebViewMessageEvent) {\n\t\n\t\t\t\tif(event.detail.data !== null){\n\t\t\t\t\tconst data = event.detail.data;\n\t\t\t\t\tconst websdk:any  = data?.get('websdk') as any;\n\t\t\t\t\tthis.initSdk(websdk)\n\t\t\t\t}\n\t\t\t\t\r\n\t\t\t},\n\t\t\tinitSdk(sdk: any){\n\t\t\t\tconsole.log((sdk as Web).connection, 'sdk')\n\t\t\t},\r\n\t\t\terror(event : WebViewErrorEvent) {\r\n\t\t\t\tthis.loadError = true\r\n\t\t\t\tconsole.log(JSON.stringify(event));\r\n\t\t\t},\r\n\t\t\tloading(event : WebViewLoadingEvent) {\r\n\t\t\t\tconsole.log(JSON.stringify(event));\r\n\t\t\t},\r\n\t\t\tloaded(event : WebViewLoadedEvent) {\r\n\t\t\t\tconsole.log(JSON.stringify(event));\r\n\t\t\t},\r\n\t\t\tdownload(event : WebViewDownloadEvent) {\r\n\t\t\t\tconsole.log(JSON.stringify(event));\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\tcontent: \"下载链接: \" + event.detail.url + \"\\n文件大小: \" + event.detail.contentLength / 1024 + \"KB\",\r\n\t\t\t\t\tshowCancel: false\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tconfirm(event : InputConfirmEvent) {\r\n\t\t\t\tconsole.log(JSON.stringify(event));\r\n\t\t\t\tlet url = event.detail.value;\r\n\t\t\t\tif (!url.startsWith('https://') && !url.startsWith('http://')) {\r\n\t\t\t\t\turl = 'https://' + url;\r\n\t\t\t\t}\r\n\t\t\t\tthis.src = url;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.uni-flex-wv {\r\n\t\twidth: 100%;\r\n\t\theight: 200px;\r\n\t}\r\n\r\n\t.uni-input-v {\r\n\t\tpadding: 10rpx 0;\r\n\t}\r\n\r\n\t.uni-btn-ml {\r\n\t\tmargin-left: 10rpx;\r\n\t}\r\n</style>",null],"names":[],"mappings":"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"}